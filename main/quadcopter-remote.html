<!DOCTYPE html>
<html>
  <head>
    <title>QUADCOPTER REMOTE</title>
    <style type="text/css">
      body{position:relative;background:#111;}
      #content{position:absolute;left:0;top:0;width:100%;height:100%;}
      #esc{margin:20px;width:100px;height:400px;background:#222;position:relative;padding:0;}
      #esc_control{position:absolute;left:0;width:100%;height:40px;background:#b81111;bottom:0;margin-bottom:-20px;}
    </style>
  </head>
  
  <body>
    
    <div id="content">
      
      <div id="esc">
        <div id="esc_control"></div>
      </div>
      
    </div>
    
    <script type="text/javascript">      
      function QuadcopterRemote(){
        
        // ATTRIBUTES -----------------------------------------------------------------
        this.bReady = false;
        this.oWS = null;
        
        // FUNCTION -----------------------------------------------------------------
        // initialize remote
        this.initialize = function(){
          this.oWS = new WebSocket("ws://192.168.1.16:4444");
          this.oWS.onopened = function(){
            this.sendSignal("up=1230");
            this.bReady = true;
          };
        };
        
        // FUNCTION
        // send signal to server
        this.sendSignal = function(sCommand){
          this.oWS.send(JSON.stringify({"sType":"command", "sCommand":sCommand}));
        };
        
        // CONSTRUCTOR
        // fake constructor call
        this.initialize();
        
      }
      
      var QR = new QuadcopterRemote();
      
      // catch keyboard events
      document.onkeydown = function(oEvent){
        //if(!QR.bReady)
          //return;
        console.log("sending");
        if(oEvent.keyIdentifier == "PageUp"){
          QR.sendSignal("up");
        }else if(oEvent.keyIdentifier == "PageDown"){
          QR.sendSignal("down");
        }
      };
    </script>
  </body>
</html>
